<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>„Åæ„Å©„ÅãÂÖàÁîü„ÅÆËã±Ë™û„ÅÆ‰øùÂÅ•ÂÆ§ÔºöÊÄùËÄÉ„ÅÆ„Çπ„Ç≠„É£„Éã„É≥„Ç∞„Éà„É¨„Éº„Éã„É≥„Ç∞</title>
    
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://unpkg.com/lucide-react@latest"></script>

    <style>
        /* „Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥„ÅÆË£úÂÆåÔºàTailwind„Éó„É©„Ç∞„Ç§„É≥„ÅÆ‰ª£„Çè„ÇäÔºâ */
        .animate-in { animation: fadeIn 0.5s ease-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .fade-in { opacity: 1; animation: fadeIn 0.8s ease-in; }
        .zoom-in { animation: zoomIn 0.6s ease-out; }
        @keyframes zoomIn { from { transform: scale(0.95); opacity: 0; } to { transform: scale(1); opacity: 1; } }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useCallback } = React;
        const { 
            Timer, CheckCircle, XCircle, Play, RotateCcw, 
            Award, ArrowRight, Heart, Coffee, Leaf, 
            Sparkles, Lightbulb, Shuffle, ChevronRight 
        } = LucideReact;

        const App = () => {
            const [gameState, setGameState] = useState('start'); 
            const [currentLevelIdx, setCurrentLevelIdx] = useState(0);
            const [shuffledLevels, setShuffledLevels] = useState([]);
            const [score, setScore] = useState(0);
            const [timeLeft, setTimeLeft] = useState(300); 
            const [feedback, setFeedback] = useState(null); 
            const [combo, setCombo] = useState(0);
            const [showThinkingPoint, setShowThinkingPoint] = useState(false);
            const [selectedOption, setSelectedOption] = useState(null);

            const allLevels = [
                { type: "„ÄêÂÖ∑‰Ωì ‚Üí ÊäΩË±°„Äë", target: "hamsters, rabbits, and guinea pigs", options: ["small pet animals", "aquatic creatures", "wild predators", "colorful birds"], answer: "small pet animals", thinking: "ÂÄãÂà•„ÅÆÂãïÁâ©„ÅÆÂêçÂâç„Çí„ÄéÂ∞èÂãïÁâ©„Äè„Å®„ÅÑ„ÅÜ„Ç´„ÉÜ„Ç¥„É™„Éº„Å´„Åæ„Å®„ÇÅ„Å¶„ÅÑ„Åæ„Åô„ÄÇ" },
                { type: "„ÄêÂÖ∑‰Ωì ‚Üí ÊäΩË±°„Äë", target: "from 9:00 AM to 5:00 PM", options: ["during the daytime", "throughout the night", "at sunset", "twice a week"], answer: "during the daytime", thinking: "ÂÖ∑‰ΩìÁöÑ„Å™ÊôÇÂàª„Çí„ÄéÊó•‰∏≠„Äè„Å®„ÅÑ„ÅÜÊôÇÈñìÊ¶ÇÂøµ„Å´Â§âÊèõ„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ" },
                { type: "„ÄêÂÖ∑‰Ωì ‚Üí ÊäΩË±°„Äë", target: "well tested and controlled", options: ["properly assessed", "newly invented", "cheap and fast", "dangerous to use"], answer: "properly assessed", thinking: "„Äé„ÉÜ„Çπ„Éà„ÉªÂà∂Âæ°„Åï„Çå„Çã„Äè„Çí„ÄéÈÅ©Âàá„Å´Ë©ï‰æ°ÔºàassessedÔºâ„Åï„Çå„Çã„Äè„Å®„ÅÑ„ÅÜÊ¶ÇÂøµ„Å´„ÄÇ" },
                { type: "„ÄêÂÖ∑‰Ωì ‚Üí ÊäΩË±°„Äë", target: "no permit is required", options: ["can use it freely", "must pay a fee", "limited access", "only for students"], answer: "can use it freely", thinking: "„ÄéË®±ÂèØ‰∏çË¶Å„ÄèÔºù„ÄéËá™Áî±„Å´‰Ωø„Åà„Çã„Äè„Å®„ÅÑ„ÅÜÂà§Êñ≠Âäõ„ÇíÂïè„ÅÜË®Ä„ÅÑÊèõ„Åà„Åß„Åô„ÄÇ" },
                { type: "„ÄêÂÖ∑‰Ωì ‚Üí ÊäΩË±°„Äë", target: "farthest from the entrance", options: ["at the back of the area", "near the front door", "beside the exit", "in the middle"], answer: "at the back of the area", thinking: "ÂÖ•Âè£„Åã„ÇâÊúÄ„ÇÇÈÅ†„ÅÑÔºù„Äé‰∏ÄÁï™Â••„Äè„ÇíÊåá„Åó„Åæ„Åô„ÄÇ" },
                { type: "„ÄêÂÖ∑‰Ωì ‚Üí ÊäΩË±°„Äë", target: "every Monday and Thursday", options: ["twice a week", "on weekends", "every other day", "daily"], answer: "twice a week", thinking: "ÁâπÂÆö„ÅÆÊõúÊó•„Çí„ÄéÈÄ±„Å´‰ΩïÂõû„Äè„Å®„ÅÑ„ÅÜÈ†ªÂ∫¶„Å´ÊäΩË±°Âåñ„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ" },
                { type: "„ÄêÂÖ∑‰Ωì ‚Üí ÊäΩË±°„Äë", target: "within 10 minutes on foot", options: ["walking distance", "by public transport", "an hour drive", "near the station"], answer: "walking distance", thinking: "„ÄéÂæíÊ≠©10ÂàÜ‰ª•ÂÜÖ„Äè„Çí„ÄéÂæíÊ≠©ÂúèÂÜÖ„Äè„Å®Ë®Ä„ÅÑÊèõ„Åà„Å¶„ÅÑ„Åæ„Åô„ÄÇ" },
                { type: "„ÄêÂÖ∑‰Ωì ‚Üí ÊäΩË±°„Äë", target: "soft grass on the floor", options: ["vegetation bedding", "sandy ground", "wooden tiles", "plastic cover"], answer: "vegetation bedding", thinking: "„ÄéËçâÔºàgrassÔºâ„Äè„Çí„ÄéÊ§çÁâ©ÔºàvegetationÔºâ„Äè„Å®„ÅÑ„ÅÜ‰∏ä‰ΩçË™û„Å´Â§âÊèõ„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ" },
                { type: "„ÄêÂÖ∑‰Ωì ‚Üí ÊäΩË±°„Äë", target: "discount for students", options: ["reduced price for learners", "free admission", "full-price tickets", "group reservation"], answer: "reduced price for learners", thinking: "„ÄéÂ≠¶ÁîüÂâ≤Âºï„Äè„Çí„ÄéÂ≠¶ÁøíËÄÖ„ÅÆ„Åü„ÇÅ„ÅÆ‰æ°Ê†ºÊ∏õÂÖç„Äè„Å®Ë™¨ÊòéÁöÑ„Å´Ë®Ä„ÅÑÊèõ„Åà„Å¶„ÅÑ„Åæ„Åô„ÄÇ" },
                { type: "„ÄêÂÖ∑‰Ωì ‚Üí ÊäΩË±°„Äë", target: "18 years old and over", options: ["adults only", "children only", "for families", "all ages"], answer: "adults only", thinking: "Âπ¥ÈΩ¢Âà∂Èôê„Çí„ÄéÂ§ß‰∫∫ÈôêÂÆö„Äè„Å®„ÅÑ„ÅÜ„Ç´„ÉÜ„Ç¥„É™„Éº„Å´ÊäΩË±°Âåñ„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ" },
                { type: "„ÄêÊäΩË±° ‚Üí ÂÖ∑‰Ωì„Äë", target: "outdoor activities", options: ["hiking and camping", "coding and gaming", "reading and writing", "sleeping and dreaming"], answer: "hiking and camping", thinking: "„ÄéÂ±ãÂ§ñÊ¥ªÂãï„Äè„ÅÆÂÖ∑‰ΩìÁöÑ„Å™‰∏≠Ë∫´„ÇíÁâπÂÆö„Åô„Çã„Éà„É¨„Éº„Éã„É≥„Ç∞„Åß„Åô„ÄÇ" },
                { type: "„ÄêÊäΩË±° ‚Üí ÂÖ∑‰Ωì„Äë", target: "medical facilities", options: ["hospitals and clinics", "theaters and parks", "banks and stores", "factories and farms"], answer: "hospitals and clinics", thinking: "„ÄéÂåªÁôÇÊñΩË®≠„Äè„Å®„ÅÑ„ÅÜË®ÄËëâ„Åã„Çâ„ÄÅÂÖ∑‰ΩìÁöÑ„Å™Â†¥ÊâÄ„ÇíÊÉ≥Ëµ∑„Åó„Åæ„Åô„ÄÇ" },
                { type: "„ÄêÊäΩË±° ‚Üí ÂÖ∑‰Ωì„Äë", target: "academic achievements", options: ["good grades and awards", "delicious food", "new clothes", "fast cars"], answer: "good grades and awards", thinking: "„ÄéÂ≠¶Ê•≠„ÅÆÊàêÊûú„Äè„ÇíÂÖ∑‰ΩìÁöÑ„Å™ÊàêÁ∏æ„ÇÑË≥û„Å´Èñ¢ÈÄ£‰ªò„Åë„Åæ„Åô„ÄÇ" },
                { type: "„ÄêÊäΩË±° ‚Üí ÂÖ∑‰Ωì„Äë", target: "digital devices", options: ["smartphones and tablets", "pens and pencils", "chairs and tables", "shoes and socks"], answer: "smartphones and tablets", thinking: "„Äé„Éá„Ç∏„Çø„É´Ê©üÂô®„Äè„ÅÆÂÖ∑‰Ωì‰æã„Çí„Çπ„Ç≠„É£„É≥„Åó„Åæ„Åô„ÄÇ" },
                { type: "„ÄêÊäΩË±° ‚Üí ÂÖ∑‰Ωì„Äë", target: "tropical fruits", options: ["mangoes and pineapples", "apples and pears", "grapes and cherries", "peaches and plums"], answer: "mangoes and pineapples", thinking: "„Ç´„ÉÜ„Ç¥„É™„Éº„ÇíÂÖ∑‰ΩìÁöÑ„Å™ÂêçÂâç„Å´ÂàÜËß£„Åô„ÇãÁ∑¥Áøí„Åß„Åô„ÄÇ" },
                { type: "„ÄêÊäΩË±° ‚Üí ÂÖ∑‰Ωì„Äë", target: "dairy products", options: ["milk and cheese", "meat and fish", "bread and rice", "sugar and salt"], answer: "milk and cheese", thinking: "„Äé‰π≥Ë£ΩÂìÅ„Äè„Å´Âê´„Åæ„Çå„ÇãÂÖ∑‰ΩìÁöÑ„Å™È£üÂìÅ„ÇíÈÅ∏„Å≥„Åæ„Åô„ÄÇ" },
                { type: "„ÄêÊäΩË±° ‚Üí ÂÖ∑‰Ωì„Äë", target: "seasonal changes", options: ["spring, summer, fall, winter", "morning, noon, evening", "north, south, east, west", "red, blue, yellow"], answer: "spring, summer, fall, winter", thinking: "„ÄéÂ≠£ÁØÄ„ÅÆÁßª„ÇäÂ§â„Çè„Çä„Äè„ÅÆ‰∏≠Ë∫´„ÇíÂÖ∑‰ΩìÁöÑ„Å´ÁâπÂÆö„Åó„Åæ„Åô„ÄÇ" },
                { type: "„ÄêÊäΩË±° ‚Üí ÂÖ∑‰Ωì„Äë", target: "emergency contacts", options: ["police and ambulance", "friends and family", "teachers and staff", "shop and cafe"], answer: "police and ambulance", thinking: "„ÄéÁ∑äÊÄ•ÈÄ£Áµ°ÂÖà„Äè„ÇíÂÖ∑‰ΩìÁöÑ„Å™Ê©üÈñ¢„Å´Áµê„Å≥„Å§„Åë„Åæ„Åô„ÄÇ" },
                { type: "„ÄêÊäΩË±° ‚Üí ÂÖ∑‰Ωì„Äë", target: "natural disasters", options: ["earthquakes and floods", "sunshine and rainbow", "festivals and events", "music and art"], answer: "earthquakes and floods", thinking: "„ÄéËá™ÁÑ∂ÁÅΩÂÆ≥„Äè„ÇíÂÖ∑‰ΩìÁöÑ„Å™ÁèæË±°„Å´ÁøªË®≥„Åó„Åæ„Åô„ÄÇ" },
                { type: "„ÄêÊäΩË±° ‚Üí ÂÖ∑‰Ωì„Äë", target: "daily necessities", options: ["food and water", "luxury watches", "designer bags", "sports cars"], answer: "food and water", thinking: "„ÄéÁîüÊ¥ªÂøÖÈúÄÂìÅ„Äè„Å®„ÅÑ„ÅÜË®ÄËëâ„Åå‰Ωï„ÇíÊåá„Åô„Åã„ÇíÂà§Êñ≠„Åó„Åæ„Åô„ÄÇ" }
            ];

            const shuffleArray = (array) => {
                const newArr = [...array];
                for (let i = newArr.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [newArr[i], newArr[j]] = [newArr[j], newArr[i]];
                }
                return newArr;
            };

            const startGame = () => {
                const preparedLevels = shuffleArray(allLevels).map(level => ({
                    ...level,
                    options: shuffleArray(level.options)
                }));
                setShuffledLevels(preparedLevels);
                setGameState('playing');
                setCurrentLevelIdx(0);
                setScore(0);
                setTimeLeft(300);
                setCombo(0);
                setFeedback(null);
                setShowThinkingPoint(false);
                setSelectedOption(null);
            };

            const handleSelectAnswer = useCallback((option) => {
                if (showThinkingPoint) return;
                const isCorrect = option === shuffledLevels[currentLevelIdx].answer;
                setSelectedOption(option);
                if (isCorrect) {
                    setScore(prev => prev + 5); 
                    setCombo(prev => prev + 1);
                    setFeedback('correct');
                } else {
                    setCombo(0);
                    setFeedback('wrong');
                }
                setShowThinkingPoint(true);
            }, [currentLevelIdx, shuffledLevels, showThinkingPoint]);

            const handleGoToNext = () => {
                if (currentLevelIdx < shuffledLevels.length - 1) {
                    setCurrentLevelIdx(prev => prev + 1);
                    setFeedback(null);
                    setShowThinkingPoint(false);
                    setSelectedOption(null);
                } else {
                    setGameState('result');
                }
            };

            useEffect(() => {
                let timer;
                if (gameState === 'playing' && timeLeft > 0 && !showThinkingPoint) {
                    timer = setInterval(() => {
                        setTimeLeft(prev => prev - 1);
                    }, 1000);
                } else if (timeLeft === 0) {
                    setGameState('result');
                }
                return () => clearInterval(timer);
            }, [gameState, timeLeft, showThinkingPoint]);

            const theme = {
                bg: "bg-[#fdf8f1]", 
                card: "bg-white",
                primary: "bg-[#ffb7b2]", 
                primaryHover: "hover:bg-[#ff9a9e]",
                secondary: "bg-[#a8dadc]", 
                textMain: "text-[#5a4d44]", 
                textSub: "text-[#8e7e74]", 
            };

            return (
                <div className={`min-h-screen ${theme.bg} flex items-center justify-center p-4 font-sans ${theme.textMain}`}>
                    <div className={`w-full max-w-md ${theme.card} rounded-[3.5rem] shadow-[0_30px_70px_rgba(180,160,140,0.2)] overflow-hidden border-8 border-white flex flex-col min-h-[720px] relative`}>
                        
                        {/* Start Screen */}
                        {gameState === 'start' && (
                            <div className="flex-grow flex flex-col items-center justify-center p-10 text-center animate-in">
                                <div className="w-32 h-32 bg-[#fff9f0] rounded-full flex items-center justify-center text-[#e8b69d] mb-10 shadow-inner border-4 border-white relative">
                                    <Coffee size={56} />
                                    <div className="absolute -top-2 -right-2 bg-white p-2 rounded-full shadow-md text-[#ffb7b2] animate-pulse">
                                        <Heart size={20} fill="currentColor" />
                                    </div>
                                </div>
                                <h2 className="text-3xl font-bold mb-5 tracking-tight leading-tight">ÊÄùËÄÉ„ÅÆ„Çπ„Ç≠„É£„Éã„É≥„Ç∞<br/><span className="text-[#ffb7b2]">20Âïè„Éª100ÁÇπÊ∫ÄÁÇπ</span></h2>
                                <p className={`${theme.textSub} text-[14px] mb-12 leading-relaxed px-4 italic`}>
                                    Ëß£Ë™¨„Çí„Åò„Å£„Åè„ÇäË™≠„Çì„Åß„ÄÅËá™ÂàÜ„ÅÆ„Éö„Éº„Çπ„Åß<br/>
                                    <b>„ÄåÊÄùËÄÉ„ÅÆ„Éñ„É™„ÉÉ„Ç∏„Äç</b>„Çí„Éû„Çπ„Çø„Éº„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇüåø
                                </p>
                                <button onClick={startGame} className={`w-full ${theme.primary} ${theme.primaryHover} text-white font-bold py-6 px-8 rounded-full text-xl shadow-xl flex items-center justify-center gap-3 transition-all active:scale-95`}>
                                    <Play fill="white" size={24} /> ÁâπË®ì„Çí„ÅØ„Åò„ÇÅ„Çã
                                </button>
                            </div>
                        )}

                        {/* Playing Screen */}
                        {gameState === 'playing' && shuffledLevels.length > 0 && (
                            <div className="flex-grow flex flex-col p-8 animate-in">
                                <div className="flex justify-between items-center mb-8">
                                    <div className="text-left">
                                        <span className="text-[10px] font-black text-[#b8a398] uppercase tracking-[0.2em] block mb-2 opacity-80 italic">{shuffledLevels[currentLevelIdx].type}</span>
                                        <div className="text-2xl font-black italic text-[#e8b69d]">Score: {score}</div>
                                    </div>
                                    <div className={`flex items-center gap-2 font-bold px-4 py-2 rounded-full shadow-sm transition-all ${timeLeft < 30 ? 'bg-red-50 text-red-400' : 'bg-white text-[#ff9a9e]'}`}>
                                        <Timer size={16} /> <span className="font-mono">{timeLeft}s</span>
                                    </div>
                                </div>

                                <div className="bg-[#fffcf8] border-2 border-[#f5efeb] p-8 rounded-[3rem] text-center mb-10 relative shadow-sm flex items-center justify-center min-h-[160px]">
                                    <span className="absolute -top-3 left-1/2 -translate-x-1/2 bg-white px-5 py-1.5 rounded-full border border-[#f5efeb] text-[10px] font-black text-[#b8a398] uppercase tracking-[0.2em] italic shadow-sm">Target Phrase</span>
                                    <h3 className={`text-xl font-bold transition-all ${showThinkingPoint ? 'scale-90 text-[#8e7e74] italic' : 'scale-100'}`}>
                                        "{shuffledLevels[currentLevelIdx].target}"
                                    </h3>
                                </div>

                                {!showThinkingPoint ? (
                                    <div className="grid grid-cols-1 gap-3.5 animate-in">
                                        {shuffledLevels[currentLevelIdx].options.map((option, idx) => (
                                            <button key={idx} onClick={() => handleSelectAnswer(option)} className="w-full p-4.5 text-left rounded-[1.5rem] bg-[#f9f5f2] hover:bg-white hover:border-[#ffb7b2] hover:shadow-lg border-2 border-transparent transition-all font-bold text-[#7a6a5f] text-sm flex justify-between items-center group active:scale-95">
                                                <span>{option}</span>
                                                <ArrowRight size={18} className="text-[#dcd0c9] group-hover:text-[#ffb7b2] group-hover:translate-x-1.5 transition-all" />
                                            </button>
                                        ))}
                                    </div>
                                ) : (
                                    <div className="animate-in flex flex-col flex-grow">
                                        <div className={`w-full p-5 mb-6 rounded-[1.5rem] border-2 flex justify-between items-center shadow-sm ${selectedOption === shuffledLevels[currentLevelIdx].answer ? 'border-[#82c182] bg-[#f0f9f0]' : 'border-[#ff9a9e] bg-[#fff5f5]'}`}>
                                            <div className="flex items-center gap-3 font-bold text-sm">
                                                {selectedOption === shuffledLevels[currentLevelIdx].answer ? <CheckCircle size={20} className="text-[#82c182]" /> : <XCircle size={20} className="text-[#ff9a9e]" />}
                                                <span>{selectedOption}</span>
                                            </div>
                                        </div>
                                        <div className="bg-[#fff9f0] p-6 rounded-[2rem] border-l-8 border-[#ffb7b2] flex gap-4 shadow-sm mb-8">
                                            <div className="bg-white p-2 rounded-xl h-fit"><Lightbulb className="text-[#ffb7b2]" size={22} /></div>
                                            <div className="text-[15px] leading-relaxed font-bold text-[#7a6a5f]">
                                                <span className="text-[#b8a398] block mb-2 text-[11px] uppercase font-black tracking-tighter">Thinking Point</span>
                                                {shuffledLevels[currentLevelIdx].thinking}
                                            </div>
                                        </div>
                                        <button onClick={handleGoToNext} className={`mt-auto w-full py-5 rounded-full ${theme.secondary} text-white font-bold text-lg shadow-lg flex items-center justify-center gap-3 active:scale-95 transition-all mb-2`}>
                                            Ê¨°„ÅÆÂïèÈ°å„Å∏ <ChevronRight size={20} />
                                        </button>
                                    </div>
                                )}
                            </div>
                        )}

                        {/* Result Screen */}
                        {gameState === 'result' && (
                            <div className="flex-grow flex flex-col items-center justify-center p-12 text-center zoom-in">
                                <Award size={72} strokeWidth={1} className="text-[#e8b69d] mb-8" />
                                <h2 className="text-3xl font-bold mb-3 text-slate-800">ÁâπË®ì„ÄÅ„Åä„Å§„Åã„Çå„Åï„Åæüåø</h2>
                                <div className="text-8xl font-black text-[#ffb7b2] mb-12 tracking-tighter">
                                    {score}<span className="text-3xl text-[#dcd0c9] ml-1">/100</span>
                                </div>
                                <div className="bg-[#fffcf8] p-8 rounded-[3rem] mb-12 w-full border-2 border-[#f5efeb] shadow-inner italic font-bold text-[#8e7e74]">
                                    {score === 100 ? "„ÄêS„É©„É≥„ÇØ„ÄëÂÆåÁíß„Åß„ÅôÔºÅ" : score >= 80 ? "„ÄêA„É©„É≥„ÇØ„ÄëÁ¥†Êô¥„Çâ„Åó„ÅÑÔºÅ" : "„ÄêB„É©„É≥„ÇØ„Äë„Çà„ÅèÈ†ëÂºµ„Çä„Åæ„Åó„ÅüÔºÅ"}
                                </div>
                                <button onClick={startGame} className="w-full text-[#b8a398] hover:text-[#7a6a5f] font-bold py-3 text-xs underline underline-offset-8 decoration-2 flex items-center justify-center gap-2">
                                    <RotateCcw size={14} /> Êñ∞„Åó„ÅÑÂïèÈ°å„Çª„ÉÉ„Éà„ÅßÂÜçÊåëÊà¶
                                </button>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>


